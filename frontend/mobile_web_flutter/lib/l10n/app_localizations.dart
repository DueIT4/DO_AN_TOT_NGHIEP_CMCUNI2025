import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';

class AppLocalizations {
  final Locale locale;

  AppLocalizations(this.locale);

  static const supportedLocales = [
    Locale('vi'),
    Locale('en'),
    Locale('ja'),
    Locale('zh'),
  ];

  static const _localizedValues = {
    'vi': {
      'app_title': 'ZestGuard',
      'personal': 'Cá nhân',
      'greeting': 'Xin chào,',
      'monitoring': 'ZestGuard đang theo dõi vườn của bạn',
      'humidity': 'Độ ẩm',
      'temperature': 'Nhiệt độ',
      'camera_title': 'Camera giám sát',
      'camera_hint': 'Chạm vào khung để cấu hình Droicam',
      'ai_chatbot': 'AI Chatbot',
      'ai_helper': 'Hỗ trợ bạn 24/7',
      'ask_now': 'Hỏi ngay',
      'ai_chat_title': 'Trợ lý AI',
      'ai_input_hint': 'Nhập tin nhắn...',
      'ai_send': 'Gửi',
      'ai_missing_key': 'Chưa cấu hình GEMINI_API_KEY.',
      'ai_error': 'AI gặp lỗi, vui lòng thử lại.',
      'report': 'Cảnh báo',
      'view_analytics': 'Xem phân tích',
      'alerts': 'Thông báo',
      'alerts_count': '2 thông báo',
      'home_tab': 'Home',
      'camera_tab': 'Camera',
      'device_tab': 'Thiết bị',
      'personal_tab': 'Cá nhân',
      'edit_info': 'Chỉnh sửa thông tin',
      'language': 'Ngôn ngữ',
      'notifications': 'Thông báo',
      'logout': 'Đăng xuất',
      'notification_on': 'Đã bật thông báo',
      'notification_off': 'Đã tắt thông báo',
      'info_updated': 'Đã cập nhật thông tin',
      'name': 'Họ và tên',
      'phone': 'Số điện thoại',
      'phone_email': 'Số điện thoại hoặc email',
      'email': 'Email',
      'address': 'Địa chỉ',
      'save_changes': 'Lưu thay đổi',
      'and': 'và',
      'agree_terms_message': 'Bạn cần đồng ý Điều khoản & Chính sách.',
      'register_success': 'Đăng ký thành công!',
      'password_mismatch': 'Mật khẩu không khớp',
      'login_title': 'Đăng nhập',
      'register_title': 'Đăng ký tài khoản',
      'login_subtitle': 'Chào mừng bạn quay lại',
      'register_subtitle': 'Vui lòng điền thông tin tài khoản',
      'password': 'Mật khẩu',
      'confirm_password': 'Nhập lại mật khẩu',
      'field_required': 'Vui lòng nhập thông tin này',
      'agree_prefix': 'Tôi đồng ý với',
      'terms': 'Điều khoản sử dụng',
      'privacy': 'Chính sách bảo mật',
      'submit_login': 'Đăng nhập',
      'submit_register': 'Đăng ký',
      'login_with': 'Hoặc đăng nhập bằng',
      'google': 'Google',
      'facebook': 'Facebook',
      'toggle_to_register': 'Chưa có tài khoản? Đăng ký ngay',
      'toggle_to_login': 'Đã có tài khoản? Đăng nhập ngay',
      'droicam_configured': 'Đã cấu hình Droicam:',
      'droicam_desc': 'Hiển thị stream trực tiếp sẽ được tích hợp sau.',
    },
    'en': {
      'app_title': 'ZestGuard',
      'personal': 'Profile',
      'greeting': 'Hello,',
      'monitoring': 'ZestGuard is watching your garden',
      'humidity': 'Humidity',
      'temperature': 'Temperature',
      'camera_title': 'Monitoring camera',
      'camera_hint': 'Tap to configure Droicam',
      'ai_chatbot': 'AI Chatbot',
      'ai_helper': 'Available 24/7',
      'ask_now': 'Ask now',
      'ai_chat_title': 'AI Assistant',
      'ai_input_hint': 'Type a message...',
      'ai_send': 'Send',
      'ai_missing_key': 'GEMINI_API_KEY is not configured.',
      'ai_error': 'The AI assistant ran into an error. Please retry.',
      'report': 'Report',
      'view_analytics': 'View analytics',
      'alerts': 'Alerts',
      'alerts_count': '2 alerts',
      'home_tab': 'Home',
      'camera_tab': 'Camera',
      'device_tab': 'Devices',
      'personal_tab': 'Profile',
      'edit_info': 'Edit information',
      'language': 'Language',
      'notifications': 'Notifications',
      'logout': 'Log out',
      'notification_on': 'Notifications enabled',
      'notification_off': 'Notifications disabled',
      'info_updated': 'Profile updated',
      'name': 'Full name',
      'phone': 'Phone number',
      'phone_email': 'Phone number or email',
      'email': 'Email',
      'address': 'Address',
      'save_changes': 'Save changes',
      'and': 'and',
      'agree_terms_message': 'Please accept the Terms & Privacy Policy.',
      'register_success': 'Registered successfully!',
      'password_mismatch': 'Passwords do not match',
      'login_title': 'Sign in',
      'register_title': 'Create account',
      'login_subtitle': 'Welcome back',
      'register_subtitle': 'Please enter your account details',
      'password': 'Password',
      'confirm_password': 'Confirm password',
      'field_required': 'Please fill out this field',
      'agree_prefix': 'I agree to the',
      'terms': 'Terms of Use',
      'privacy': 'Privacy Policy',
      'submit_login': 'Sign in',
      'submit_register': 'Sign up',
      'login_with': 'Or sign in with',
      'google': 'Google',
      'facebook': 'Facebook',
      'toggle_to_register': 'No account? Sign up now',
      'toggle_to_login': 'Already have an account? Sign in',
      'droicam_configured': 'Droicam configured:',
      'droicam_desc': 'Live streaming will be added later.',
    },
    'ja': {
      'app_title': 'ZestGuard',
      'personal': 'プロフィール',
      'greeting': 'こんにちは、',
      'monitoring': 'ZestGuard があなたの庭を監視しています',
      'humidity': '湿度',
      'temperature': '温度',
      'camera_title': '監視カメラ',
      'camera_hint': 'タップして Droicam を設定',
      'ai_chatbot': 'AI チャットボット',
      'ai_helper': '24 時間サポート',
      'ask_now': '今すぐ質問',
      'ai_chat_title': 'AI アシスタント',
      'ai_input_hint': 'メッセージを入力...',
      'ai_send': '送信',
      'ai_missing_key': 'GEMINI_API_KEY が設定されていません。',
      'ai_error': 'AI でエラーが発生しました。もう一度お試しください。',
      'report': 'レポート',
      'view_analytics': '分析を見る',
      'alerts': 'アラート',
      'alerts_count': '通知 2 件',
      'home_tab': 'ホーム',
      'camera_tab': 'カメラ',
      'device_tab': 'デバイス',
      'personal_tab': 'プロフィール',
      'edit_info': '情報を編集',
      'language': '言語',
      'notifications': '通知',
      'logout': 'ログアウト',
      'notification_on': '通知をオンにしました',
      'notification_off': '通知をオフにしました',
      'info_updated': 'プロフィールを更新しました',
      'name': '氏名',
      'phone': '電話番号',
      'phone_email': '電話番号またはメール',
      'email': 'メールアドレス',
      'address': '住所',
      'save_changes': '変更を保存',
      'and': 'と',
      'agree_terms_message': '利用規約とプライバシーポリシーに同意してください。',
      'register_success': '登録に成功しました！',
      'password_mismatch': 'パスワードが一致しません',
      'login_title': 'ログイン',
      'register_title': 'アカウント作成',
      'login_subtitle': 'お帰りなさい',
      'register_subtitle': 'アカウント情報を入力してください',
      'password': 'パスワード',
      'confirm_password': 'パスワード確認',
      'field_required': 'この項目を入力してください',
      'agree_prefix': '私は以下に同意します',
      'terms': '利用規約',
      'privacy': 'プライバシーポリシー',
      'submit_login': 'ログイン',
      'submit_register': '登録',
      'login_with': 'または次でログイン',
      'google': 'Google',
      'facebook': 'Facebook',
      'toggle_to_register': 'アカウントがありませんか？ 今すぐ登録',
      'toggle_to_login': 'すでにアカウントがありますか？ ログイン',
      'droicam_configured': 'Droicam を設定済み:',
      'droicam_desc': 'ライブ配信は後で追加されます。',
    },
    'zh': {
      'app_title': 'ZestGuard',
      'personal': '个人信息',
      'greeting': '你好，',
      'monitoring': 'ZestGuard 正在监测您的花园',
      'humidity': '湿度',
      'temperature': '温度',
      'camera_title': '监控摄像头',
      'camera_hint': '点击设置 Droicam',
      'ai_chatbot': 'AI 聊天机器人',
      'ai_helper': '全天候支持',
      'ask_now': '立即咨询',
      'ai_chat_title': 'AI 助手',
      'ai_input_hint': '请输入消息...',
      'ai_send': '发送',
      'ai_missing_key': '尚未配置 GEMINI_API_KEY。',
      'ai_error': 'AI 出现错误，请稍后再试。',
      'report': '报告',
      'view_analytics': '查看分析',
      'alerts': '警报',
      'alerts_count': '2 条通知',
      'home_tab': '首页',
      'camera_tab': '摄像头',
      'device_tab': '设备',
      'personal_tab': '个人',
      'edit_info': '编辑信息',
      'language': '语言',
      'notifications': '通知',
      'logout': '退出登录',
      'notification_on': '已打开通知',
      'notification_off': '已关闭通知',
      'info_updated': '个人资料已更新',
      'name': '姓名',
      'phone': '电话号码',
      'phone_email': '电话或邮箱',
      'email': '邮箱',
      'address': '地址',
      'save_changes': '保存更改',
      'and': '和',
      'agree_terms_message': '请同意使用条款和隐私政策。',
      'register_success': '注册成功！',
      'password_mismatch': '密码不一致',
      'login_title': '登录',
      'register_title': '创建账户',
      'login_subtitle': '欢迎回来',
      'register_subtitle': '请输入账户信息',
      'password': '密码',
      'confirm_password': '确认密码',
      'field_required': '请填写此字段',
      'agree_prefix': '我同意',
      'terms': '使用条款',
      'privacy': '隐私政策',
      'submit_login': '登录',
      'submit_register': '注册',
      'login_with': '或使用以下方式登录',
      'google': 'Google',
      'facebook': 'Facebook',
      'toggle_to_register': '没有账户？立即注册',
      'toggle_to_login': '已有账户？立即登录',
      'droicam_configured': 'Droicam 已配置：',
      'droicam_desc': '实时流稍后提供。',
    },
  };

  String translate(String key) {
    final languageCode = locale.languageCode;
    final values = _localizedValues[languageCode] ?? _localizedValues['vi']!;
    return values[key] ?? _localizedValues['vi']![key] ?? key;
  }

  static AppLocalizations of(BuildContext context) {
    return Localizations.of<AppLocalizations>(context, AppLocalizations)!;
  }
}

class AppLocalizationsDelegate extends LocalizationsDelegate<AppLocalizations> {
  const AppLocalizationsDelegate();

  @override
  bool isSupported(Locale locale) => AppLocalizations.supportedLocales
      .map((e) => e.languageCode)
      .contains(locale.languageCode);

  @override
  Future<AppLocalizations> load(Locale locale) =>
      SynchronousFuture(AppLocalizations(locale));

  @override
  bool shouldReload(covariant LocalizationsDelegate<AppLocalizations> old) =>
      false;
}
